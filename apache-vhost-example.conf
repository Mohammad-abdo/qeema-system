# Example Apache VirtualHost for the frontend (qeemasupport.site)
# القواعد مكتوبة هنا عشان تشتغل حتى لو .htaccess مش قاري
#
# على السيرفر:
#   sudo cp apache-vhost-example.conf /etc/apache2/sites-available/qeemasupport.site.conf
#   sudo a2enmod rewrite
#   sudo a2ensite qeemasupport.site.conf
#   sudo systemctl reload apache2

<VirtualHost *:80>
    ServerName qeemasupport.site
    DocumentRoot /var/www/qeemasupport.site

    <Directory /var/www/qeemasupport.site>
        Require all granted

        # SPA: أي مسار مش ملف أو فولدر يروح لـ index.html (بدون الاعتماد على .htaccess)
        RewriteEngine On
        RewriteBase /
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^ /index.html [L]
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/qeemasupport_error.log
    CustomLog ${APACHE_LOG_DIR}/qeemasupport_access.log combined

    RewriteEngine On
    RewriteCond %{SERVER_NAME} =qeemasupport.site
    RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent]
</VirtualHost>

<VirtualHost *:443>
    ServerName qeemasupport.site
    DocumentRoot /var/www/qeemasupport.site

    <Directory /var/www/qeemasupport.site>
        Require all granted

        # SPA: أي مسار مش ملف أو فولدر يروح لـ index.html (بدون الاعتماد على .htaccess)
        RewriteEngine On
        RewriteBase /
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^ /index.html [L]
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/qeemasupport_ssl_error.log
    CustomLog ${APACHE_LOG_DIR}/qeemasupport_ssl_access.log combined

    SSLEngine on
    # SSLCertificateFile /path/to/fullchain.pem
    # SSLCertificateKeyFile /path/to/privkey.pem
</VirtualHost>
